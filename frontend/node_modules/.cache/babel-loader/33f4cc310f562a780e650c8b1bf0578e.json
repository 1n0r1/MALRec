{"ast":null,"code":"import _defineProperty from\"/home/hain/code/project-semantic/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/hain/code/project-semantic/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/hain/code/project-semantic/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{AUTH}from\"../../constants/actions.js\";import{Paper,Button,TextField,Grid,Typography}from\"@mui/material\";import{useState}from\"react\";import Input from\"./Input.jsx\";import{useDispatch}from\"react-redux\";import{GoogleLogin}from\"react-google-login\";import{signin,signup}from\"../../actions/Auth.js\";import{useNavigate}from\"react-router-dom\";import LockRoundedIcon from\"@mui/icons-material/LockRounded\";import GoogleIcon from\"@mui/icons-material/Google\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Auth(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hasFailed=_useState4[0],setHasFailed=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var initialState={familyName:\"\",givenName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var _useState7=useState(initialState),_useState8=_slicedToArray(_useState7,2),form=_useState8[0],setForm=_useState8[1];function handleSubmit(e){e.preventDefault();if(isSignup){dispatch(signup(form,function(){return navigate;}));}else{dispatch(signin(form)).then(function(){if(localStorage.getItem(\"profile\")){navigate(\"/\");}else{setHasFailed(true);}});}}function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));}function toggleSignup(){setIsSignup(function(prevState){return!prevState;});}function toggleShowPassword(){setShowPassword(function(prevState){return!prevState;});}function googleSuccess(res){var result=res===null||res===void 0?void 0:res.profileObj;var token=res===null||res===void 0?void 0:res.tokenId;try{dispatch({type:AUTH,payload:{result:result,token:token}});navigate(\"/\");}catch(err){console.log(err);}}function googleFailure(res){console.log(res);console.log(\"google Sign in was unsuccessful\");}return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:0,alignItems:\"center\",justifyContent:\"center\",sx:{minHeight:\"100vh\"},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,aign:\"center\",justifyContent:\"center\"}),/*#__PURE__*/_jsx(Typography,{align:\"center\",variant:\"h5\",children:/*#__PURE__*/_jsx(LockRoundedIcon,{})}),/*#__PURE__*/_jsx(Typography,{align:\"center\",variant:\"h5\",children:isSignup?\"Sign Up\":\"Sign in\"}),isSignup&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(TextField,{name:\"familyName\",label:\"family name\",onChange:handleChange,half:\"true\",sx:{m:1}}),/*#__PURE__*/_jsx(TextField,{name:\"givenName\",label:\"givenName\",onChange:handleChange,half:\"true\",sx:{m:1}})]})}),/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Input,{name:\"email\",label:\"email\",handleChange:handleChange}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"password\",type:showPassword?\"text\":\"password\",handleChange:handleChange,handleShowPassword:toggleShowPassword})]}),isSignup&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Input,{name:\"confirmPassword\",label:\"repeat password\",type:showPassword?\"text\":\"password\",handleChange:handleChange,handleShowPassword:toggleShowPassword})})}),/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",align:\"center\",variant:\"contained\",sx:{m:1},children:isSignup?\"Sign Up\":\"Sign In\"}),/*#__PURE__*/_jsx(Button,{align:\"center\",onClick:toggleSignup,children:isSignup?\"Already have an account? Sign in\":\"Don't have an account? Sign up\"})]}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"595641216970-q7stivunfod31flmk298dmlgd12pt896.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/_jsx(Button,{color:\"primary\",fullWidth:true,onClick:renderProps.onClick,startIcon:/*#__PURE__*/_jsx(GoogleIcon,{}),variant:\"contained\",children:\"Google Sign In\"});},onSuccess:googleSuccess,onFailure:googleFailure,cookiePolicy:\"single_host_origin\"}),hasFailed&&!isSignup&&/*#__PURE__*/_jsx(Typography,{children:\"Error, invalid login\"})]})})});}export default Auth;","map":{"version":3,"sources":["/home/hain/code/project-semantic/frontend/src/components/Auth/Auth.jsx"],"names":["React","AUTH","Paper","Button","TextField","Grid","Typography","useState","Input","useDispatch","GoogleLogin","signin","signup","useNavigate","LockRoundedIcon","GoogleIcon","Auth","dispatch","navigate","isSignup","setIsSignup","hasFailed","setHasFailed","showPassword","setShowPassword","initialState","familyName","givenName","email","password","confirmPassword","form","setForm","handleSubmit","e","preventDefault","then","localStorage","getItem","handleChange","target","name","value","toggleSignup","prevState","toggleShowPassword","googleSuccess","res","result","profileObj","token","tokenId","type","payload","err","console","log","googleFailure","minHeight","m","renderProps","onClick"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {AUTH} from \"../../constants/actions.js\";\nimport { Paper, Button, TextField, Grid, Typography} from \"@mui/material\";\nimport {useState} from \"react\";\nimport Input from \"./Input.jsx\";\nimport {useDispatch} from \"react-redux\";\nimport {GoogleLogin} from \"react-google-login\";\nimport {signin, signup} from \"../../actions/Auth.js\";\nimport {useNavigate} from \"react-router-dom\";\nimport LockRoundedIcon from \"@mui/icons-material/LockRounded\";\nimport GoogleIcon from \"@mui/icons-material/Google\";\n\nfunction Auth(){\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const [isSignup, setIsSignup] = useState(false);\n    const [hasFailed, setHasFailed] = useState(false);\n    const [showPassword, setShowPassword] = useState(false);\n\n    const initialState = { familyName: \"\", givenName: \"\", email: \"\", password: \"\", confirmPassword: \"\" };\n    const [form, setForm] = useState(initialState);\n\n    function handleSubmit(e){\n        e.preventDefault();\n        if(isSignup){\n            dispatch(signup(form, ()=>navigate));\n        }else{\n            dispatch(signin(form)).then(() => {\n                if(localStorage.getItem(\"profile\")){\n                    navigate(\"/\");\n                }else{\n                    setHasFailed(true);\n                }\n            });\n        }\n    }\n\n    function handleChange(e){\n        setForm({...form, [e.target.name]: e.target.value});\n    }\n\n    function toggleSignup(){\n        setIsSignup((prevState) => !prevState);\n    }\n    function toggleShowPassword(){\n        setShowPassword((prevState) => !prevState);\n    }\n\n    function googleSuccess(res){\n        const result = res?.profileObj;\n        const token = res?.tokenId;\n        try{\n            dispatch({type: AUTH, payload: {result, token}});\n            navigate(\"/\");\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    function googleFailure(res){\n        console.log(res);\n        console.log(\"google Sign in was unsuccessful\");\n    }\n\n    return(\n        <form onSubmit={handleSubmit}>\n            <Grid container spacing={0} alignItems=\"center\" justifyContent=\"center\" sx={{minHeight: \"100vh\"}}>\n                <Paper elevation={3} >\n                    <Grid container spacing={2} aign=\"center\" justifyContent=\"center\">\n                    </Grid>\n                    <Typography align=\"center\" variant=\"h5\"><LockRoundedIcon/></Typography>\n                    <Typography align=\"center\" variant=\"h5\">{isSignup ? \"Sign Up\" : \"Sign in\"}</Typography>\n                    {isSignup && (\n                        <>\n                            <Grid container>\n                                <TextField name=\"familyName\" label=\"family name\" onChange={handleChange} half=\"true\" sx={{m: 1}} />\n                                <TextField name=\"givenName\" label=\"givenName\" onChange={handleChange} half=\"true\" sx={{m: 1}} />\n                            </Grid>\n                        </>\n                    )}\n                    <Grid>\n                        <Input name=\"email\" label=\"email\" handleChange={handleChange}/>\n                        <Input name=\"password\" label=\"password\" type={showPassword?\"text\":\"password\"} handleChange={handleChange} handleShowPassword={toggleShowPassword}/>\n                    </Grid>\n                    {isSignup && (\n                        <>\n                            <Grid container >\n                                <Input name=\"confirmPassword\" label=\"repeat password\" type={showPassword?\"text\":\"password\"} handleChange={handleChange} handleShowPassword={toggleShowPassword}/>\n                            </Grid>\n                        </>\n                    )}\n                    <Grid>\n                        <div/>\n                        <Button type=\"submit\" align=\"center\" variant=\"contained\" sx={{m: 1}}>{isSignup?\"Sign Up\": \"Sign In\"}</Button>\n                        <Button align=\"center\" onClick={toggleSignup}>{isSignup ? \"Already have an account? Sign in\":\"Don't have an account? Sign up\"}</Button>\n                    </Grid>\n                    <GoogleLogin\n                        clientId=\"595641216970-q7stivunfod31flmk298dmlgd12pt896.apps.googleusercontent.com\"\n                        render={(renderProps) =>(\n                            <Button color=\"primary\" fullWidth onClick={renderProps.onClick} startIcon={<GoogleIcon />} variant=\"contained\">\n                                Google Sign In\n                            </Button>\n                        )}\n                        onSuccess={googleSuccess}\n                        onFailure={googleFailure}\n                        cookiePolicy=\"single_host_origin\"\n                    />\n                    {\n                        hasFailed && !isSignup && (\n                            <Typography>Error, invalid login</Typography>\n                        )\n                    }\n                </Paper>\n            </Grid>\n        </form>\n    );\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}